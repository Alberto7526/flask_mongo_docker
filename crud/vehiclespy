from config.config import mongo
from bson.json_util import dumps
from bson import ObjectId
from flask import Response, jsonify


def get_vehicles():
    """
    Obtiene todos los vehiculos de la base de datos.

    Returns:
        list[vehicle]: Una lista de todos los vehicles registrados.

    Raises:
        HTTPException:
            - 500: Si ocurre un error inesperado al obtener los vehicles.
    """
    vehicles = mongo.db.vehiculos.find()
    vehicles = dumps(vehicles)
    return Response(vehicles, mimetype="application/json", status=200)
